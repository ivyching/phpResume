!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=685)}({14:function(e,t){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(s=window)}e.exports=s},685:function(e,t,s){(function(e){function t(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.jQuery;!function(e,s,o){var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.guid=t,s(this._selector.memoPanel).on("click",this._selector.timelineMemoButton,this.timelineMemoDisplay.bind(this)),s(this._selector.memoPanel).on("click",this._selector.memoSaveButton,this.memoSave.bind(this)),s(this._selector.memoPanel).on("click",this._selector.jsdeleteButton,this.handleMemoDelete.bind(this)),s(this._selector.memoPanel).on("click",this._selector.showMessage,this.showMessage.bind(this)),setInterval(this.refreshWsLogMessage.bind(this),1e4)}return function(e,s,o){s&&t(e.prototype,s),o&&t(e,o)}(e,[{key:"showMessage",value:function(e){var t=s(e.currentTarget);t.data("show")?(t.html('<i class="fa fa-chevron-down"></i> '+this.translation.messageShowmore),s(this._selector.memoMessageBody+" >  li").each(function(e,t){e>10&&s(t).slideUp()}),t.data("show",!1)):(t.html('<i class="fa fa-chevron-up"></i> '+this.translation.messageHide),s(this._selector.memoMessageBody+" >  li").slideDown("slow"),t.data("show",!0))}},{key:"refreshWsLogMessage",value:function(){var e={refreshTime:s(this._selector.refreshTime).html()?s(this._selector.refreshTime).html().trim():"",guid:this._guid},t=this,n=new Date,i=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2)+" "+("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2);s(this._selector.refreshTime).html(i),s.ajax({url:o.generate("LogMessage_Refresh"),method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e),success:function(e){s.each(e,function(e,s){t._addRow(s)})},error:function(){}})}},{key:"timelineMemoDisplay",value:function(e){s(e.currentTarget).hasClass("active")?(s(e.currentTarget).removeClass("active"),s(this._selector.timelineMemoClick).fadeOut()):(s(e.currentTarget).addClass("active"),s(this._selector.timelineMemoClick).fadeIn())}},{key:"memoSave",value:function(e){var t={messageBodyHtml:s(this._selector.logMessageBody).val(),guid:this._guid},n=this;s.ajax({url:o.generate("LogMessage_Add"),method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:function(e){s(n._selector.timelineMemoClick).removeClass("has-error"),n.refreshWsLogMessage(),n._clearForm()},error:function(e,t){s(n._selector.timelineMemoClick).addClass("has-error");var o=JSON.parse(e.responseText);s(n._selector.logMessageBody).siblings(".help-block").html(o.errors)}})}},{key:"_clearForm",value:function(){s(this._selector.logMessageBody).val(""),s(this._selector.logMessageBody).siblings(".help-block").html("")}},{key:"_addRow",value:function(e){var t=e.createdTime.substr(0,4)-1911,o='<li>   <div class="smart-timeline-icon">       <i class="fa fa-file-text"></i>   </div>   <div class="smart-timeline-time">       <small>'+(t=t+"-"+e.createdTime.substr(5,20))+'</small>   </div>   <div class="smart-timeline-content">       <p class="memo-delete-btn">';e.deleteable&&(o+='           <button type="button" class="btn btn-xs btn-danger js-delete-memo-log" data-sn="'+e.sn+'">               <i class="fa fa-trash-o"></i>           </button>'),e.messageBodyHtml=this.escapeHtml(e.messageBodyHtml),o+="       </p>       <p>           "+e.createdUid+"       </p>       <p>           "+e.messageBodyHtml+"       </p>   </div></li>",s(this._selector.memoMessageBody).prepend(o)}},{key:"escapeHtml",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"_mapErrorsToForm",value:function(e){console.log(e)}},{key:"handleMemoDelete",value:function(e){var t=s(this._selector.jsdeleteButton).data("sn"),n=s(e.currentTarget),i=this;swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(e){e.value&&s.ajax({url:o.generate("LogMessage_Delete"),method:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({sn:t}),success:function(){swal("Deleted!","Your file has been deleted.","success"),i._deleteRow(n)},error:function(e,t){var s=JSON.parse(e.responseText);alert(s.errors)}})})}},{key:"_deleteRow",value:function(e){e.closest("li").remove()}},{key:"_selector",get:function(){return{memoPanel:"div#memoPanel",memoMessgeDiv:"div#memoMessgeDiv",timelineMemoButton:"button#timelineMemo",timelineMemoClick:".timelineMemoClick",memoSaveButton:"button#memoSave",logMessageBody:"textarea#logMessageBody",guidInput:"input#pc01_form_guid",memoMessageBody:"#memoMessageBody",jsdeleteButton:".js-delete-memo-log",refreshTime:"#refresh-time",showMessage:"#showMessage"}}},{key:"translation",get:function(){return this._translation},set:function(e){this._translation=e}},{key:"guid",get:function(){return this._guid},set:function(e){this._guid=e}}]),e}();e.WsLogMessageApp=n}(window,jQuery,Routing)}).call(this,s(14))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvV3NMb2dNZXNzYWdlQXBwLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwiZ2xvYmFsIiwialF1ZXJ5Iiwid2luZG93cyIsIiQiLCJSb3V0aW5nIiwiV3NMb2dNZXNzYWdlQXBwIiwiZ3VpZCIsIl9jbGFzc0NhbGxDaGVjayIsIl9zZWxlY3RvciIsIm1lbW9QYW5lbCIsIm9uIiwidGltZWxpbmVNZW1vQnV0dG9uIiwidGltZWxpbmVNZW1vRGlzcGxheSIsIm1lbW9TYXZlQnV0dG9uIiwibWVtb1NhdmUiLCJqc2RlbGV0ZUJ1dHRvbiIsImhhbmRsZU1lbW9EZWxldGUiLCJzaG93TWVzc2FnZSIsInNldEludGVydmFsIiwicmVmcmVzaFdzTG9nTWVzc2FnZSIsIl9jcmVhdGVDbGFzcyIsIiRidG4iLCJjdXJyZW50VGFyZ2V0IiwiZGF0YSIsImh0bWwiLCJ0cmFuc2xhdGlvbiIsIm1lc3NhZ2VTaG93bW9yZSIsIm1lbW9NZXNzYWdlQm9keSIsImVhY2giLCJpbmRleCIsInNsaWRlVXAiLCJtZXNzYWdlSGlkZSIsInNsaWRlRG93biIsInJlZnJlc2hUaW1lIiwidHJpbSIsIl9ndWlkIiwic2VsZiIsImRhdGUiLCJEYXRlIiwiZGF0ZVN0cmluZyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJzbGljZSIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwiYWpheCIsInVybCIsImdlbmVyYXRlIiwibWV0aG9kIiwiZGF0YVR5cGUiLCJjb250ZW50VHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzIiwiX2FkZFJvdyIsImVycm9yIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInRpbWVsaW5lTWVtb0NsaWNrIiwiZmFkZU91dCIsImFkZENsYXNzIiwiZmFkZUluIiwibWVzc2FnZUJvZHlIdG1sIiwibG9nTWVzc2FnZUJvZHkiLCJ2YWwiLCJfY2xlYXJGb3JtIiwianFYSFIiLCJleGNlcHRpb24iLCJlcnJvckRhdGEiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInNpYmxpbmdzIiwiZXJyb3JzIiwiY3JlYXRlZFRpbWUiLCJzdWJzdHIiLCJkZWxldGVhYmxlIiwic24iLCJlc2NhcGVIdG1sIiwiY3JlYXRlZFVpZCIsInByZXBlbmQiLCJ0ZXh0IiwicmVwbGFjZSIsImNvbnNvbGUiLCJsb2ciLCIkbGluayIsInN3YWwiLCJ0aXRsZSIsInR5cGUiLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvbkNvbG9yIiwiY2FuY2VsQnV0dG9uQ29sb3IiLCJjb25maXJtQnV0dG9uVGV4dCIsInRoZW4iLCJyZXN1bHQiLCJfZGVsZXRlUm93IiwiYWxlcnQiLCJjbG9zZXN0IiwicmVtb3ZlIiwibWVtb01lc3NnZURpdiIsImd1aWRJbnB1dCIsIl90cmFuc2xhdGlvbiIsInNldCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJ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WDJGLGNBQWUsb0JBQ2Z6RixtQkFBb0Isc0JBQ3BCaUQsa0JBQW1CLHFCQUNuQi9DLGVBQWdCLGtCQUNoQm9ELGVBQWdCLDBCQUNoQm9DLFVBQVcsdUJBQ1gxRSxnQkFBaUIsbUJBQ2pCWixlQUFnQixzQkFDaEJrQixZQUFhLGdCQUNiaEIsWUFBYSxtQkF6QkdoQyxJQUFBLGNBQUFWLElBQUEsV0E4QnBCLE9BQU9vQixLQUFLMkcsY0E5QlFDLElBQUEsU0FpQ1I5RSxHQUNaOUIsS0FBSzJHLGFBQWU3RSxLQWxDQXhDLElBQUEsT0FBQVYsSUFBQSxXQXNDcEIsT0FBT29CLEtBQUt3QyxPQXRDUW9FLElBQUEsU0F5Q2ZqRyxHQUNMWCxLQUFLd0MsTUFBUTdCLE1BMUNPRCxFQUFBLEdBeU81QkgsRUFBUUcsZ0JBQWtCQSxFQXpPOUIsQ0EwT0dOLE9BQVFFLE9BQVFHIiwiZmlsZSI6IldzTG9nTWVzc2FnZUFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2ODUpO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsIGV2YWwpKFwidGhpc1wiKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsImNvbnN0ICQgPSBnbG9iYWwualF1ZXJ5O1xyXG5cclxuKGZ1bmN0aW9uICh3aW5kb3dzLCAkLCBSb3V0aW5nKSB7XHJcbiAgICBjbGFzcyBXc0xvZ01lc3NhZ2VBcHAge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGd1aWQpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmd1aWQgPSBndWlkO1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci5tZW1vUGFuZWwpLm9uKCdjbGljaycsIHRoaXMuX3NlbGVjdG9yLnRpbWVsaW5lTWVtb0J1dHRvbiwgdGhpcy50aW1lbGluZU1lbW9EaXNwbGF5LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLm1lbW9QYW5lbCkub24oJ2NsaWNrJywgdGhpcy5fc2VsZWN0b3IubWVtb1NhdmVCdXR0b24sIHRoaXMubWVtb1NhdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICQodGhpcy5fc2VsZWN0b3IubWVtb1BhbmVsKS5vbignY2xpY2snLCB0aGlzLl9zZWxlY3Rvci5qc2RlbGV0ZUJ1dHRvbiwgdGhpcy5oYW5kbGVNZW1vRGVsZXRlLmJpbmQodGhpcykpXHJcbiAgICAgICAgICAgICQodGhpcy5fc2VsZWN0b3IubWVtb1BhbmVsKS5vbignY2xpY2snLCB0aGlzLl9zZWxlY3Rvci5zaG93TWVzc2FnZSwgdGhpcy5zaG93TWVzc2FnZS5iaW5kKHRoaXMpKVxyXG4gICAgICAgICAgICBzZXRJbnRlcnZhbCh0aGlzLnJlZnJlc2hXc0xvZ01lc3NhZ2UuYmluZCh0aGlzKSwgMTAwMDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IF9zZWxlY3RvcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lbW9QYW5lbDogXCJkaXYjbWVtb1BhbmVsXCIsXHJcbiAgICAgICAgICAgICAgICBtZW1vTWVzc2dlRGl2OiBcImRpdiNtZW1vTWVzc2dlRGl2XCIsXHJcbiAgICAgICAgICAgICAgICB0aW1lbGluZU1lbW9CdXR0b246IFwiYnV0dG9uI3RpbWVsaW5lTWVtb1wiLFxyXG4gICAgICAgICAgICAgICAgdGltZWxpbmVNZW1vQ2xpY2s6IFwiLnRpbWVsaW5lTWVtb0NsaWNrXCIsXHJcbiAgICAgICAgICAgICAgICBtZW1vU2F2ZUJ1dHRvbjogXCJidXR0b24jbWVtb1NhdmVcIixcclxuICAgICAgICAgICAgICAgIGxvZ01lc3NhZ2VCb2R5OiBcInRleHRhcmVhI2xvZ01lc3NhZ2VCb2R5XCIsXHJcbiAgICAgICAgICAgICAgICBndWlkSW5wdXQ6IFwiaW5wdXQjcGMwMV9mb3JtX2d1aWRcIixcclxuICAgICAgICAgICAgICAgIG1lbW9NZXNzYWdlQm9keTogXCIjbWVtb01lc3NhZ2VCb2R5XCIsXHJcbiAgICAgICAgICAgICAgICBqc2RlbGV0ZUJ1dHRvbjogXCIuanMtZGVsZXRlLW1lbW8tbG9nXCIsXHJcbiAgICAgICAgICAgICAgICByZWZyZXNoVGltZTogXCIjcmVmcmVzaC10aW1lXCIsXHJcbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZTogXCIjc2hvd01lc3NhZ2VcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IHRyYW5zbGF0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNsYXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXQgdHJhbnNsYXRpb24odHJhbnNsYXRpb24pe1xyXG4gICAgICAgICAgICB0aGlzLl90cmFuc2xhdGlvbiA9IHRyYW5zbGF0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGd1aWQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ndWlkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0IGd1aWQoZ3VpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9ndWlkID0gZ3VpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNob3dNZXNzYWdlKGUpIHtcclxuICAgICAgICAgICAgdmFyICRidG4gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGJ0bi5kYXRhKFwic2hvd1wiKSkge1xyXG4gICAgICAgICAgICAgICAgJGJ0bi5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWNoZXZyb24tZG93blwiPjwvaT4gJyArIHRoaXMudHJhbnNsYXRpb24ubWVzc2FnZVNob3dtb3JlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcy5fc2VsZWN0b3IubWVtb01lc3NhZ2VCb2R5ICsgJyA+ICBsaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodmFsdWUpLnNsaWRlVXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJGJ0bi5kYXRhKFwic2hvd1wiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkYnRuLmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtY2hldnJvbi11cFwiPjwvaT4gJyArIHRoaXMudHJhbnNsYXRpb24ubWVzc2FnZUhpZGUpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci5tZW1vTWVzc2FnZUJvZHkgKyAnID4gIGxpJykuc2xpZGVEb3duKCdzbG93Jyk7XHJcbiAgICAgICAgICAgICAgICAkYnRuLmRhdGEoXCJzaG93XCIsIHRydWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlZnJlc2hXc0xvZ01lc3NhZ2UoKSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcmVmcmVzaFRpbWU6ICQodGhpcy5fc2VsZWN0b3IucmVmcmVzaFRpbWUpLmh0bWwoKSA/ICQodGhpcy5fc2VsZWN0b3IucmVmcmVzaFRpbWUpLmh0bWwoKS50cmltKCkgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgZ3VpZDogdGhpcy5fZ3VpZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRm9ybWF0ID1cclxuICAgICAgICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICtcclxuICAgICAgICAgICAgICAgIChcIjBcIiArIChkYXRlLmdldE1vbnRoKCkrMSkpLnNsaWNlKC0yKSArIFwiLVwiICtcclxuICAgICAgICAgICAgICAgIChcIjBcIiArIGRhdGUuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAoXCIwXCIgKyBkYXRlLmdldEhvdXJzKCkpLnNsaWNlKC0yKSArIFwiOlwiICtcclxuICAgICAgICAgICAgICAgIChcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpKS5zbGljZSgtMikgKyBcIjpcIiArXHJcbiAgICAgICAgICAgICAgICAoXCIwXCIgKyBkYXRlLmdldFNlY29uZHMoKSkuc2xpY2UoLTIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGVTdHJpbmcgPSBkYXRlRm9ybWF0O1xyXG4gICAgICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLnJlZnJlc2hUaW1lKS5odG1sKGRhdGVTdHJpbmcpO1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdMb2dNZXNzYWdlX1JlZnJlc2gnKSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkUm93KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aW1lbGluZU1lbW9EaXNwbGF5KGUpIHtcclxuICAgICAgICAgICAgaWYgKCQoZS5jdXJyZW50VGFyZ2V0KS5oYXNDbGFzcyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci50aW1lbGluZU1lbW9DbGljaykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJChlLmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci50aW1lbGluZU1lbW9DbGljaykuZmFkZUluKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lbW9TYXZlKGUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlQm9keUh0bWw6ICQodGhpcy5fc2VsZWN0b3IubG9nTWVzc2FnZUJvZHkpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgZ3VpZDogdGhpcy5fZ3VpZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdMb2dNZXNzYWdlX0FkZCcpLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoc2VsZi5fc2VsZWN0b3IudGltZWxpbmVNZW1vQ2xpY2spLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaFdzTG9nTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFyRm9ybSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoc2VsZi5fc2VsZWN0b3IudGltZWxpbmVNZW1vQ2xpY2spLmFkZENsYXNzKFwiaGFzLWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckRhdGEgPSBKU09OLnBhcnNlKGpxWEhSLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChzZWxmLl9zZWxlY3Rvci5sb2dNZXNzYWdlQm9keSkuc2libGluZ3MoXCIuaGVscC1ibG9ja1wiKS5odG1sKGVycm9yRGF0YS5lcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9jbGVhckZvcm0oKSB7XHJcbiAgICAgICAgICAgICQodGhpcy5fc2VsZWN0b3IubG9nTWVzc2FnZUJvZHkpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci5sb2dNZXNzYWdlQm9keSkuc2libGluZ3MoXCIuaGVscC1ibG9ja1wiKS5odG1sKFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2FkZFJvdyhkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVkVGltZSA9IGRhdGEuY3JlYXRlZFRpbWUuc3Vic3RyKDAsNCkgLSAxOTExO1xyXG4gICAgICAgICAgICBjcmVhdGVkVGltZSA9IGNyZWF0ZWRUaW1lICsgJy0nICsgZGF0YS5jcmVhdGVkVGltZS5zdWJzdHIoNSwyMCk7XHJcbiAgICAgICAgICAgIHZhciBodG1sID1cclxuICAgICAgICAgICAgICAgICc8bGk+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cInNtYXJ0LXRpbWVsaW5lLWljb25cIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1maWxlLXRleHRcIj48L2k+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgPGRpdiBjbGFzcz1cInNtYXJ0LXRpbWVsaW5lLXRpbWVcIj4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgPHNtYWxsPicgKyBjcmVhdGVkVGltZSArICc8L3NtYWxsPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDxkaXYgY2xhc3M9XCJzbWFydC10aW1lbGluZS1jb250ZW50XCI+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgIDxwIGNsYXNzPVwibWVtby1kZWxldGUtYnRuXCI+J1xyXG4gICAgICAgICAgICA7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5kZWxldGVhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9XHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1kYW5nZXIganMtZGVsZXRlLW1lbW8tbG9nXCIgZGF0YS1zbj1cIicgKyBkYXRhLnNuICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L2k+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAgICAgICAgICAgPC9idXR0b24+JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGF0YS5tZXNzYWdlQm9keUh0bWwgPSB0aGlzLmVzY2FwZUh0bWwoZGF0YS5tZXNzYWdlQm9keUh0bWwpO1xyXG5cclxuICAgICAgICAgICAgaHRtbCArPVxyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8L3A+JyArXHJcbiAgICAgICAgICAgICAgICAnICAgICAgIDxwPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICAgICAgJyArIGRhdGEuY3JlYXRlZFVpZCArICcnICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgPC9wPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgICAgICA8cD4nICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgICAgICcgKyBkYXRhLm1lc3NhZ2VCb2R5SHRtbCArICcnICtcclxuICAgICAgICAgICAgICAgICcgICAgICAgPC9wPicgK1xyXG4gICAgICAgICAgICAgICAgJyAgIDwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvbGk+J1xyXG4gICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICQodGhpcy5fc2VsZWN0b3IubWVtb01lc3NhZ2VCb2R5KS5wcmVwZW5kKGh0bWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXNjYXBlSHRtbCh0ZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvJi9nLCBcIiZhbXA7XCIpXHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csIFwiJnF1b3Q7XCIpXHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIiYjMDM5O1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9tYXBFcnJvcnNUb0Zvcm0oZXJyb3JEYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBoYW5kbGVNZW1vRGVsZXRlKGUpIHtcclxuICAgICAgICAgICAgdmFyIHNuID0gJCh0aGlzLl9zZWxlY3Rvci5qc2RlbGV0ZUJ1dHRvbikuZGF0YShcInNuXCIpO1xyXG4gICAgICAgICAgICB2YXIgJGxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc3dhbCh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0FyZSB5b3Ugc3VyZT8nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJZb3Ugd29uJ3QgYmUgYWJsZSB0byByZXZlcnQgdGhpcyFcIixcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcclxuICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICcjMzA4NWQ2JyxcclxuICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNvbG9yOiAnI2QzMycsXHJcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1llcywgZGVsZXRlIGl0ISdcclxuICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdMb2dNZXNzYWdlX0RlbGV0ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7c246IHNufSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0RlbGV0ZWQhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWW91ciBmaWxlIGhhcyBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZVJvdygkbGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoanFYSFIsIGV4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yRGF0YSA9IEpTT04ucGFyc2UoanFYSFIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVycm9yRGF0YS5lcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX2RlbGV0ZVJvdygkbGluaykge1xyXG4gICAgICAgICAgICBsZXQgJHBhcmVudCA9ICRsaW5rLmNsb3Nlc3QoXCJsaVwiKTtcclxuICAgICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93cy5Xc0xvZ01lc3NhZ2VBcHAgPSBXc0xvZ01lc3NhZ2VBcHA7XHJcbn0pKHdpbmRvdywgalF1ZXJ5LCBSb3V0aW5nKTsiXSwic291cmNlUm9vdCI6IiJ9