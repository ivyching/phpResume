!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=689)}({689:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=function(){function t(e,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=this;this.field=n,this.button=e,this.oldField=a,$($(this.button).data("target")).on("click",this._selector.dictionarytab1,this._fieldDisplay.bind(this)),$($(this.button).data("target")).on("click",this._selector.dictionarytab2,this._commonDisplay.bind(this)),$($(this.button).data("target")).on("click",this._selector.newbutton,this._addNewLine.bind(this)),$($(this.button).data("target")).on("click",this._selector.delete,this._deleteData.bind(this)),$($(this.button).data("target")).on("click",this._selector.commondelete,this._deleteCommonData.bind(this)),$($(this.button).data("target")).on("click",this._selector.addBtn,this._addText.bind(this)),$($(this.button).data("target")).on("click",this._selector.addBtn,this._workflowOpinion.bind(this)),$(e).click(function(){void 0!==a?$(o._selector.newline).val($("#"+a).val()):$(o._selector.newline).val($("#"+n).val()),$($(this).data("target")).modal(),$($(this).data("target")).on("blur",o._fieldDisplay())}),o._refreshNewLine(),o._commonData()}return function(t,e,a){e&&n(t.prototype,e),a&&n(t,a)}(t,[{key:"_addText",value:function(t){this.field;var e=this.oldField,n=$("#"+e).val(),a=t.currentTarget.innerText;$("#"+e).val(n+a),$($(this.button).data("target")).modal("hide")}},{key:"_fieldDisplay",value:function(){$(this._selector.newDictionarBody).removeClass("hidden"),$(this._selector.tableroll).removeClass("hidden"),$(this._selector.tableroll2).addClass("hidden"),$(this._selector.newlineclass).removeClass("hidden"),$(this._selector.newMessageBody).addClass("hidden"),$(this._selector.dictionarytab1).addClass("showTab1")}},{key:"_commonDisplay",value:function(){$(this._selector.newlineclass).addClass("hidden"),$(this._selector.tableroll).addClass("hidden"),$(this._selector.tableroll2).removeClass("hidden"),$(this._selector.newDictionarBody).addClass("hidden"),$(this._selector.newMessageBody).removeClass("hidden"),$(this._selector.dictionarytab1).removeClass("showTab1")}},{key:"_refreshNewLine",value:function(){$(this._selector.newline).val();var t=this,e=$(t._selector.tableroll);this.field;$.ajax({url:Routing.generate("dictionary_refresh",{fieldName:this.field}),method:"POST",datatype:"json",contentType:"application/json",success:function(n){t._deleteRow(e),$.each(n,function(e,n){t._addRow(n.data,n.id)})},error:function(){}})}},{key:"_refreshByOne",value:function(){var t={newDictionarBody:$($(this.button).data("target")).find(this._selector.newline).val()},e=this;$.ajax({url:Routing.generate("dictionary_addOneRow"),method:"POST",datatype:"json",contentType:"application/json",data:JSON.stringify(t,this.field),success:function(t){e._addRow(t.data,t.id)},error:function(){}})}},{key:"_addNewLine",value:function(){var t={newDictionarBody:$($(this.button).data("target")).find(this._selector.newline).val()},e=this;$.ajax({url:Routing.generate("dictionary_add",{fieldName:e.field}),method:"POST",datatype:"json",contentType:"application/json",data:JSON.stringify(t),success:function(t){"error"==t?swal({title:"該筆資料已重複",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1}):(e._refreshByOne(),e._clear())},error:function(){}})}},{key:"_addRow",value:function(t,e){var n='<tr><td  style="width: 100% ;"><span class="btn btn-default addBtn  " style="width: 100%;white-space:pre-wrap;text-align:left;" >'+t+'</span></td><td><button type="button" class="btn btn-cancel  delete" data-info='+e+' ><i class="glyphicon glyphicon-remove "></i></button></td></tr>';$($(this.button).data("target")).find(this._selector.newDictionarBody).prepend(n)}},{key:"_addCommon",value:function(t,e){var n='<tr><td style="width: 100%"><span class="btn btn-default addBtn " style="width: 100%;white-space:pre-wrap;text-align:left;" ><b>'+t+'</b></span></td><td><button type="button" class="btn btn-cancel commondelete " data-info2='+e+' ><i class="glyphicon glyphicon-remove cancleRemove"></i></button></td></tr>';$($(this.button).data("target")).find(this._selector.newMessageBody).prepend(n)}},{key:"_clear",value:function(){$($(this.button).data("target")).find(this._selector.newline).val("")}},{key:"_commonData",value:function(){var t=this,e=$(t._selector.tableroll2);$.ajax({url:Routing.generate("dictionary_common"),method:"POST",datatype:"json",contentType:"application/json",success:function(n){t._deleteRow(e),$.each(n,function(e,n){t._addCommon(n.data,n.id)})},error:function(){}})}},{key:"_deleteData",value:function(t){var e={delete:t.currentTarget},n=$(e.delete),a=n.attr("data-info"),o=this;swal({title:"您確定要刪除嗎?",text:"刪除後不得復原",showCancelButton:!0,cancelButtonClass:"btn btn-danger",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1,confirmButtonText:"確定刪除!"}).then(function(t){t.value&&$.ajax({url:Routing.generate("dictionary_delete"),type:"POST",data:{id:a},success:function(t){swal({title:"該筆詞彙已刪除",showCancelButton:!0,cancelButtonClass:"btn btn-danger",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1}),o._deleteRow(n)},error:function(){}})})}},{key:"_deleteCommonData",value:function(t){var e={commondelete:t.currentTarget},n=$(e.commondelete),a=n.attr("data-info2"),o=this;swal({title:"您確定要刪除嗎?",text:"刪除後不得復原",showCancelButton:!0,cancelButtonClass:"btn btn-danger",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1,confirmButtonText:"確定刪除!"}).then(function(t){t.value&&$.ajax({url:Routing.generate("dictionary_common_delete"),type:"POST",data:{id:a},success:function(t){swal({title:"該筆詞彙已刪除",showCancelButton:!0,cancelButtonClass:"btn btn-danger",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1}),o._deleteRow(n)},error:function(){}})})}},{key:"_deleteRow",value:function(t){t.closest(".dictionaryBody tr").remove()}},{key:"_workflowOpinion",value:function(){var t=$("textarea#workflowOpinionArea").val();$('textarea[name*="workflowOpinion"]').val(t)}},{key:"_selector",get:function(){return{mainmodal:"div.mainmodal",myModalDialog:"div.myModalDialog",messageDiv:"div.messageDiv",messageBody:"#messageBody",dictionarytab1:"a.tab1",dictionarytab2:"a.tab2",newDictionarBody:"tbody#newDictionaryBody",newline:"textarea#newline",newlineclass:"div#newlineclass",newbutton:"button#new",newMessageBody:"tbody#newMessageBody",delete:"button.delete",commondelete:"button.commondelete",tableroll:"table.tableroll",tableroll2:"table.tableroll2",addBtn:"span.addBtn"}}}]),t}();window.WaUserDictionary=a}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL1dhVXNlckRpY3Rpb25hcnkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJXYVVzZXJEaWN0aW9uYXJ5IiwiYnV0dG9uIiwiZmllbGQiLCJvbGRGaWVsZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzZWxmIiwiJCIsImRhdGEiLCJvbiIsIl9zZWxlY3RvciIsImRpY3Rpb25hcnl0YWIxIiwiX2ZpZWxkRGlzcGxheSIsImRpY3Rpb25hcnl0YWIyIiwiX2NvbW1vbkRpc3BsYXkiLCJuZXdidXR0b24iLCJfYWRkTmV3TGluZSIsImRlbGV0ZSIsIl9kZWxldGVEYXRhIiwiY29tbW9uZGVsZXRlIiwiX2RlbGV0ZUNvbW1vbkRhdGEiLCJhZGRCdG4iLCJfYWRkVGV4dCIsIl93b3JrZmxvd09waW5pb24iLCJjbGljayIsIm5ld2xpbmUiLCJ2YWwiLCJtb2RhbCIsIl9yZWZyZXNoTmV3TGluZSIsIl9jb21tb25EYXRhIiwiZSIsIm9sZFZhbCIsImZpZWxkRGF0YSIsImN1cnJlbnRUYXJnZXQiLCJpbm5lclRleHQiLCJuZXdEaWN0aW9uYXJCb2R5IiwicmVtb3ZlQ2xhc3MiLCJ0YWJsZXJvbGwiLCJ0YWJsZXJvbGwyIiwiYWRkQ2xhc3MiLCJuZXdsaW5lY2xhc3MiLCJuZXdNZXNzYWdlQm9keSIsInRhYmxlIiwiYWpheCIsInVybCIsIlJvdXRpbmciLCJnZW5lcmF0ZSIsImZpZWxkTmFtZSIsIm1ldGhvZCIsImRhdGF0eXBlIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiX2RlbGV0ZVJvdyIsImVhY2giLCJfYWRkUm93IiwiZXJyb3IiLCJmaW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInN3YWwiLCJ0aXRsZSIsImNvbmZpcm1CdXR0b25DbGFzcyIsImJ1dHRvbnNTdHlsaW5nIiwiX3JlZnJlc2hCeU9uZSIsIl9jbGVhciIsImlkIiwiaHRtbCIsInByZXBlbmQiLCJfYWRkQ29tbW9uIiwiJGRlbGV0ZUJ0biIsImF0dHIiLCJ0ZXh0Iiwic2hvd0NhbmNlbEJ1dHRvbiIsImNhbmNlbEJ1dHRvbkNsYXNzIiwiY29uZmlybUJ1dHRvblRleHQiLCJ0aGVuIiwicmVzdWx0IiwidHlwZSIsIiRsaW5rIiwiY2xvc2VzdCIsInJlbW92ZSIsIm9waW5pb24iLCJtYWlubW9kYWwiLCJteU1vZGFsRGlhbG9nIiwibWVzc2FnZURpdiIsIm1lc3NhZ2VCb2R5Iiwid2luZG93Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFr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Q1hzRCxNQUNJQyxNQUFPLFdBQ1BXLEtBQU0sVUFDTkMsa0JBQWtCLEVBQ2xCQyxrQkFBbUIsaUJBQ25CWixtQkFBb0IsdUJBQ3BCQyxnQkFBZ0IsRUFDaEJZLGtCQUFtQixVQUNwQkMsS0FBSyxTQUFDQyxHQUNEQSxFQUFPM0YsT0FDUHNCLEVBQUVvQyxNQUNFQyxJQUFLQyxRQUFRQyxTQUFTLDRCQUN0QitCLEtBQU0sT0FDTnJFLE1BQU95RCxHQUFNQSxHQUNiZCxRQUFTLFNBQVUzQyxHQUNmbUQsTUFDUUMsTUFBTyxVQUNQWSxrQkFBa0IsRUFDdEJDLGtCQUFtQixpQkFDbkJaLG1CQUFvQix1QkFDcEJDLGdCQUFnQixJQUdwQnhELEVBQUs4QyxXQUFXaUIsSUFHbEJkLE1BQU0sb0RBUWJ1QixHQUNPQSxFQUFNQyxRQUFRLHNCQUNwQkMsb0RBTVIsSUFBSUMsRUFBVTFFLEVBQUUsZ0NBQWdDbUIsTUFDaERuQixFQUFFLHFDQUFxQ21CLElBQUl1RCxxQ0E3UTNDLE9BQ0lDLFVBQVcsZ0JBQ1hDLGNBQWUsb0JBQ2ZDLFdBQVksaUJBQ1pDLFlBQWEsZUFDYjFFLGVBQWdCLFNBQ2hCRSxlQUFnQixTQUNoQnNCLGlCQUFrQiwwQkFDbEJWLFFBQVMsbUJBQ1RlLGFBQWEsbUJBQ2J6QixVQUFXLGFBQ1gwQixlQUFnQix1QkFDaEJ4QixPQUFRLGdCQUNSRSxhQUFhLHNCQUNia0IsVUFBVSxrQkFDVkMsV0FBVyxtQkFDWGpCLE9BQU8sd0JBb1FuQmlFLE9BQU90RixpQkFBbUJBIiwiZmlsZSI6IldhVXNlckRpY3Rpb25hcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNjg5KTtcbiIsImNsYXNzIFdhVXNlckRpY3Rpb25hcnkge1xyXG4gICAgY29uc3RydWN0b3IoYnV0dG9uLCBmaWVsZCxvbGRGaWVsZCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpZWxkPWZpZWxkO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uPWJ1dHRvbjtcclxuICAgICAgICB0aGlzLm9sZEZpZWxkPW9sZEZpZWxkO1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkub24oJ2NsaWNrJywgdGhpcy5fc2VsZWN0b3IuZGljdGlvbmFyeXRhYjEsIHRoaXMuX2ZpZWxkRGlzcGxheS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAkKCQodGhpcy5idXR0b24pLmRhdGEoXCJ0YXJnZXRcIikpLm9uKCdjbGljaycsIHRoaXMuX3NlbGVjdG9yLmRpY3Rpb25hcnl0YWIyLCB0aGlzLl9jb21tb25EaXNwbGF5LmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkub24oJ2NsaWNrJywgdGhpcy5fc2VsZWN0b3IubmV3YnV0dG9uLCB0aGlzLl9hZGROZXdMaW5lLmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkub24oJ2NsaWNrJywgdGhpcy5fc2VsZWN0b3IuZGVsZXRlLCB0aGlzLl9kZWxldGVEYXRhLmJpbmQodGhpcykpO1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkub24oJ2NsaWNrJyx0aGlzLl9zZWxlY3Rvci5jb21tb25kZWxldGUsdGhpcy5fZGVsZXRlQ29tbW9uRGF0YS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAkKCQodGhpcy5idXR0b24pLmRhdGEoXCJ0YXJnZXRcIikpLm9uKCdjbGljaycsdGhpcy5fc2VsZWN0b3IuYWRkQnRuLHRoaXMuX2FkZFRleHQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgJCgkKHRoaXMuYnV0dG9uKS5kYXRhKFwidGFyZ2V0XCIpKS5vbignY2xpY2snLHRoaXMuX3NlbGVjdG9yLmFkZEJ0bix0aGlzLl93b3JrZmxvd09waW5pb24uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgICQoYnV0dG9uKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiBvbGRGaWVsZCAhPSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkKHNlbGYuX3NlbGVjdG9yLm5ld2xpbmUpLnZhbCgkKCcjJytvbGRGaWVsZCkudmFsKCkpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHNlbGYuX3NlbGVjdG9yLm5ld2xpbmUpLnZhbCgkKCcjJyArIGZpZWxkKS52YWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgkKHRoaXMpLmRhdGEoXCJ0YXJnZXRcIikpLm1vZGFsKCk7XHJcbiAgICAgICAgICAgICQoJCh0aGlzKS5kYXRhKFwidGFyZ2V0XCIpKS5vbignYmx1cicsc2VsZi5fZmllbGREaXNwbGF5KCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZWxmLl9yZWZyZXNoTmV3TGluZSgpO1xyXG4gICAgICAgIHNlbGYuX2NvbW1vbkRhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgX3NlbGVjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1haW5tb2RhbDogXCJkaXYubWFpbm1vZGFsXCIsXHJcbiAgICAgICAgICAgIG15TW9kYWxEaWFsb2c6IFwiZGl2Lm15TW9kYWxEaWFsb2dcIixcclxuICAgICAgICAgICAgbWVzc2FnZURpdjogXCJkaXYubWVzc2FnZURpdlwiLFxyXG4gICAgICAgICAgICBtZXNzYWdlQm9keTogXCIjbWVzc2FnZUJvZHlcIixcclxuICAgICAgICAgICAgZGljdGlvbmFyeXRhYjE6IFwiYS50YWIxXCIsXHJcbiAgICAgICAgICAgIGRpY3Rpb25hcnl0YWIyOiBcImEudGFiMlwiLFxyXG4gICAgICAgICAgICBuZXdEaWN0aW9uYXJCb2R5OiBcInRib2R5I25ld0RpY3Rpb25hcnlCb2R5XCIsXHJcbiAgICAgICAgICAgIG5ld2xpbmU6IFwidGV4dGFyZWEjbmV3bGluZVwiLFxyXG4gICAgICAgICAgICBuZXdsaW5lY2xhc3M6XCJkaXYjbmV3bGluZWNsYXNzXCIsXHJcbiAgICAgICAgICAgIG5ld2J1dHRvbjogXCJidXR0b24jbmV3XCIsXHJcbiAgICAgICAgICAgIG5ld01lc3NhZ2VCb2R5OiBcInRib2R5I25ld01lc3NhZ2VCb2R5XCIsXHJcbiAgICAgICAgICAgIGRlbGV0ZTogXCJidXR0b24uZGVsZXRlXCIsXHJcbiAgICAgICAgICAgIGNvbW1vbmRlbGV0ZTpcImJ1dHRvbi5jb21tb25kZWxldGVcIixcclxuICAgICAgICAgICAgdGFibGVyb2xsOlwidGFibGUudGFibGVyb2xsXCIsXHJcbiAgICAgICAgICAgIHRhYmxlcm9sbDI6XCJ0YWJsZS50YWJsZXJvbGwyXCIsXHJcbiAgICAgICAgICAgIGFkZEJ0bjpcInNwYW4uYWRkQnRuXCJcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGRUZXh0KGUpIHtcclxuICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkO1xyXG4gICAgICAgIHZhciBvbGRGaWVsZD10aGlzLm9sZEZpZWxkO1xyXG5cclxuICAgICAgICB2YXIgb2xkVmFsID0gJCgnIycrb2xkRmllbGQpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkYXRhID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIHZhciBmaWVsZERhdGEgPSBkYXRhLmlubmVyVGV4dDtcclxuICAgICAgICB2YXIgc2VsZj10aGlzO1xyXG4gICAgICAgICQoJyMnK29sZEZpZWxkKS52YWwob2xkVmFsK2ZpZWxkRGF0YSk7XHJcbiAgICAgICAgJCgkKHNlbGYuYnV0dG9uKS5kYXRhKFwidGFyZ2V0XCIpKS5tb2RhbChcImhpZGVcIik7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfZmllbGREaXNwbGF5KCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLm5ld0RpY3Rpb25hckJvZHkpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICQodGhpcy5fc2VsZWN0b3IudGFibGVyb2xsKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLnRhYmxlcm9sbDIpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICQodGhpcy5fc2VsZWN0b3IubmV3bGluZWNsYXNzKS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLm5ld01lc3NhZ2VCb2R5KS5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLmRpY3Rpb25hcnl0YWIxKS5hZGRDbGFzcyhcInNob3dUYWIxXCIpO1xyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBfY29tbW9uRGlzcGxheSgpIHtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLm5ld2xpbmVjbGFzcykuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci50YWJsZXJvbGwpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICQodGhpcy5fc2VsZWN0b3IudGFibGVyb2xsMikucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgJCh0aGlzLl9zZWxlY3Rvci5uZXdEaWN0aW9uYXJCb2R5KS5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLm5ld01lc3NhZ2VCb2R5KS5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcclxuICAgICAgICAkKHRoaXMuX3NlbGVjdG9yLmRpY3Rpb25hcnl0YWIxKS5yZW1vdmVDbGFzcyhcInNob3dUYWIxXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZWZyZXNoTmV3TGluZSgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgbmV3RGljdGlvbmFyQm9keTogJCh0aGlzLl9zZWxlY3Rvci5uZXdsaW5lKS52YWwoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0YWJsZT0kKHNlbGYuX3NlbGVjdG9yLnRhYmxlcm9sbCk7XHJcbiAgICAgICAgdmFyIGZpZWxkTmFtZT10aGlzLmZpZWxkO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZSgnZGljdGlvbmFyeV9yZWZyZXNoJyx7ZmllbGROYW1lOnRoaXMuZmllbGR9KSxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kZWxldGVSb3codGFibGUpO1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkUm93KHZhbHVlWydkYXRhJ10sdmFsdWVbXCJpZFwiXSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVmcmVzaEJ5T25lKCkge1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgbmV3RGljdGlvbmFyQm9keTogJCgkKHRoaXMuYnV0dG9uKS5kYXRhKFwidGFyZ2V0XCIpKS5maW5kKHRoaXMuX3NlbGVjdG9yLm5ld2xpbmUpLnZhbCgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdkaWN0aW9uYXJ5X2FkZE9uZVJvdycpLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSx0aGlzLmZpZWxkKSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2FkZFJvdyhkYXRhW1wiZGF0YVwiXSxkYXRhW1wiaWRcIl0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgX2FkZE5ld0xpbmUoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIG5ld0RpY3Rpb25hckJvZHk6ICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkuZmluZCh0aGlzLl9zZWxlY3Rvci5uZXdsaW5lKS52YWwoKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IFJvdXRpbmcuZ2VuZXJhdGUoJ2RpY3Rpb25hcnlfYWRkJyx7ZmllbGROYW1lOnNlbGYuZmllbGR9KSxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YT09XCJlcnJvclwiKXtcclxuICAgICAgICAgICAgICAgICAgICBzd2FsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuipsuethuizh+aWmeW3sumHjeikh1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4gYnRuLXByaW1hcnkgc2F2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVmcmVzaEJ5T25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgvKmpxWEhSLGV4Y2VwdGlvbiovKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRSb3coZGF0YSxpZCkge1xyXG4gICAgICAgIHZhciBodG1sID0gJzx0cj48dGQgIHN0eWxlPVwid2lkdGg6IDEwMCUgO1wiPjxzcGFuIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGFkZEJ0biAgXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTt3aGl0ZS1zcGFjZTpwcmUtd3JhcDt0ZXh0LWFsaWduOmxlZnQ7XCIgPicgKyBkYXRhICsgJzwvc3Bhbj48L3RkPicrJzx0ZD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tY2FuY2VsICBkZWxldGVcIiBkYXRhLWluZm89JytpZCsnID48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIFwiPjwvaT48L2J1dHRvbj48L3RkPjwvdHI+J1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkuZmluZCh0aGlzLl9zZWxlY3Rvci5uZXdEaWN0aW9uYXJCb2R5KS5wcmVwZW5kKGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRDb21tb24oZGF0YSxpZCkge1xyXG4gICAgICAgIHZhciBodG1sID0gJzx0cj48dGQgc3R5bGU9XCJ3aWR0aDogMTAwJVwiPjxzcGFuIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGFkZEJ0biBcIiBzdHlsZT1cIndpZHRoOiAxMDAlO3doaXRlLXNwYWNlOnByZS13cmFwO3RleHQtYWxpZ246bGVmdDtcIiA+PGI+JyArIGRhdGEgKyAnPC9iPjwvc3Bhbj48L3RkPicgKyAnPHRkPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1jYW5jZWwgY29tbW9uZGVsZXRlIFwiIGRhdGEtaW5mbzI9JytpZCsnID48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIGNhbmNsZVJlbW92ZVwiPjwvaT48L2J1dHRvbj48L3RkPjwvdHI+J1xyXG4gICAgICAgICQoJCh0aGlzLmJ1dHRvbikuZGF0YShcInRhcmdldFwiKSkuZmluZCh0aGlzLl9zZWxlY3Rvci5uZXdNZXNzYWdlQm9keSkucHJlcGVuZChodG1sKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2xlYXIoKSB7XHJcbiAgICAgICAgJCgkKHRoaXMuYnV0dG9uKS5kYXRhKFwidGFyZ2V0XCIpKS5maW5kKHRoaXMuX3NlbGVjdG9yLm5ld2xpbmUpLnZhbChcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfY29tbW9uRGF0YSgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRhYmxlPSQoc2VsZi5fc2VsZWN0b3IudGFibGVyb2xsMik7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdkaWN0aW9uYXJ5X2NvbW1vbicpLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZVJvdyh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRDb21tb24odmFsdWVbJ2RhdGEnXSx2YWx1ZVtcImlkXCJdKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVEYXRhKGUpIHtcclxuICAgICAgICB2YXIgZGF0YT17XHJcbiAgICAgICAgICAgIGRlbGV0ZTogZS5jdXJyZW50VGFyZ2V0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgJGRlbGV0ZUJ0biA9ICQoZGF0YS5kZWxldGUpO1xyXG4gICAgICAgIHZhciBpZCA9ICRkZWxldGVCdG4uYXR0cignZGF0YS1pbmZvJyk7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzd2FsKHtcclxuICAgICAgICAgICAgdGl0bGU6IFwi5oKo56K65a6a6KaB5Yiq6Zmk5ZeOP1wiLFxyXG4gICAgICAgICAgICB0ZXh0OiBcIuWIqumZpOW+jOS4jeW+l+W+qeWOn1wiLFxyXG4gICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b25DbGFzczogJ2J0biBidG4tZGFuZ2VyJyxcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnYnRuIGJ0bi1wcmltYXJ5IHNhdmUnLFxyXG4gICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56K65a6a5Yiq6ZmkISdcclxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IFJvdXRpbmcuZ2VuZXJhdGUoXCJkaWN0aW9uYXJ5X2RlbGV0ZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7J2lkJzogaWR9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi6Kmy562G6Kme5b2Z5bey5Yiq6ZmkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uQ2xhc3M6ICdidG4gYnRuLWRhbmdlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4gYnRuLXByaW1hcnkgc2F2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zU3R5bGluZzogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZVJvdygkZGVsZXRlQnRuKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sZXJyb3I6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUNvbW1vbkRhdGEoZSl7XHJcbiAgICAgICAgdmFyIGRhdGE9e1xyXG4gICAgICAgICAgICBjb21tb25kZWxldGU6IGUuY3VycmVudFRhcmdldFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyICRkZWxldGVCdG4gPSAkKGRhdGEuY29tbW9uZGVsZXRlKTtcclxuICAgICAgICB2YXIgaWQgPSAkZGVsZXRlQnRuLmF0dHIoJ2RhdGEtaW5mbzInKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICB0aXRsZTogXCLmgqjnorrlrpropoHliKrpmaTll44/XCIsXHJcbiAgICAgICAgICAgIHRleHQ6IFwi5Yiq6Zmk5b6M5LiN5b6X5b6p5Y6fXCIsXHJcbiAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNsYXNzOiAnYnRuIGJ0bi1kYW5nZXInLFxyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4gYnRuLXByaW1hcnkgc2F2ZScsXHJcbiAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnorrlrprliKrpmaQhJ1xyXG4gICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZShcImRpY3Rpb25hcnlfY29tbW9uX2RlbGV0ZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7J2lkJzogaWR9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuipsuethuipnuW9meW3suWIqumZpFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25DbGFzczogJ2J0biBidG4tZGFuZ2VyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzczogJ2J0biBidG4tcHJpbWFyeSBzYXZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZVJvdygkZGVsZXRlQnRuKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sZXJyb3I6ZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBfZGVsZXRlUm93KCRsaW5rKSB7XHJcbiAgICAgICAgbGV0ICRwYXJlbnQgPSAkbGluay5jbG9zZXN0KFwiLmRpY3Rpb25hcnlCb2R5IHRyXCIpO1xyXG4gICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBfd29ya2Zsb3dPcGluaW9uKCl7XHJcbiAgICAgICAgdmFyIG9waW5pb24gPSgkKCd0ZXh0YXJlYSN3b3JrZmxvd09waW5pb25BcmVhJykudmFsKCkpO1xyXG4gICAgICAgICQoJ3RleHRhcmVhW25hbWUqPVwid29ya2Zsb3dPcGluaW9uXCJdJykudmFsKG9waW5pb24pO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG59XHJcblxyXG53aW5kb3cuV2FVc2VyRGljdGlvbmFyeSA9IFdhVXNlckRpY3Rpb25hcnk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=