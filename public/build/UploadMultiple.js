!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=691)}({61:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var o=function(){function t(e,n,o,i,r,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.field=e,this.id=o,this.uuid=n,this.func=a,this.type=l,this.references=[],this.funcDownloadRoute=i,this.funcDeleteRoute=r,$("#"+e).on("blur",this._selector.attachmentDropZone),$("#"+e).on("click",this._selector.delete,this._deleteFile.bind(this))}return function(t,e,o){e&&n(t.prototype,e),o&&n(t,o)}(t,[{key:"_deleteFile",value:function(t){var e=this,n={delete:t.currentTarget},o=$(n.delete),i=$(t.currentTarget).closest(".list-group-item");swal({title:"確定要刪除該筆資料嗎？",showCancelButton:!0,cancelButtonClass:"btn btn-danger",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1}).then(function(t){t.value&&$.ajax({url:Routing.generate(e.funcDeleteRoute,{id:i.attr("data-id"),fieldName:e.field}),method:"Delete",success:function(t){swal({title:"該筆資料已刪除",confirmButtonClass:"btn btn-primary save",buttonsStyling:!1}),e._deleteRow(o)},error:function(){}})})}},{key:"_deleteRow",value:function(t){t.closest("p").remove()}},{key:"showMul",value:function(t){for(var e=0;e<t.length;e++){var n=t[e].originalName,o=this.type,i="";"new"!=o&&"edit"!=o&&(i="disabled");var r='\n                       <p class="list-group-item d-flex justify-content-between align-items-center lichnage" style="background-color: unset;border: unset" data-id="'.concat(t[e].id,'">\n                          <label  style="width: auto;">').concat(n,'</label>\n                           <span><a target="_blank" href="').concat(Routing.generate(this.funcDownloadRoute,{id:t[e].id}),'" class="btn btn-link btn-sm" style="vertical-align: middle">\n                           <span class="fa fa-download"></span></a>\n                           <button class="js-delete btn btn-link btn-sm" ')+i+' type="button">\n                               <span class="fa fa-trash-o"></span>\n                           </button>\n                           </span></p>\n           ';$("#"+this.field).find(this._selector.mainAttachmentList).prepend(r)}}},{key:"ID",get:function(){return this.id}},{key:"_selector",get:function(){return{mainList:"ul.js-attachment-list",filename:"label.js-attachment",download:"button#js-download",delete:"button.js-delete",save:"button#save",mainAttachmentList:"ul.js-attachment-list"}}}]),t}();window.UploadFile=o},691:function(t,e,n){"use strict";n.r(e);n(61);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Dropzone.autoDiscover=!1;var u=function(t){function e(t,n,o,i,l,u,s){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=r(this,a(e).call(this,t,n,o,i,l,u,s))).initialDropZone(),c.refreshData(),c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,UploadFile),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"initialDropZone",value:function(){var t=this;new Dropzone("#"+t.field+" div.js-attachment-dropzone",{url:Routing.generate("upload_multipleFiles",{uuid:t.uuid,fieldName:t.field,func:t.func}),paramName:"file",uploadMultiple:!0,dictInvalidFileType:"檔案格式不符！",dictFileTooBig:"檔案容量超出限制！",dictResponseError:"回應錯誤！",acceptedFiles:["image/*","application/pdf","application/msword","application/vnd.ms-excel","docm","dotm","xlam","xlsb","xlsm","xltm","odt","ods","txt","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/octet-stream","application/vnd.oasis.opendocument.formula","application/x-zip-compressed","application/zip","text/plain"].join(","),init:function(){this.on("success",function(t,e){$(".dz-success-mark svg").css("background","#30991b").css("opacity",.5),setTimeout(function(t){this.removeFile(t)}.bind(this,t),1e3)}),this.on("successmultiple",function(e,n){t.showMul(n)}),this.on("error",function(t,e){$(".dz-error-mark svg g g").css("fill","#c00").css("opacity",.5),setTimeout(function(t){this.removeFile(t)}.bind(this,t),3e3)})}})}},{key:"refreshData",value:function(){var t=this;$.ajax({url:Routing.generate("refresh_all_files",{uuid:t.uuid,fieldName:t.field}),method:"POST",datatype:"json",contentType:"application/json",success:function(e){t.showMul(e)},error:function(){}})}}]),e}();window.UploadMultiple=u}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL1VwbG9hZEZpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL1VwbG9hZE11bHRpcGxlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVXBsb2FkRmlsZSIsImZpZWxkIiwidXVpZCIsImlkIiwiZnVuY0Rvd25sb2FkUm91dGUiLCJmdW5jRGVsZXRlUm91dGUiLCJmdW5jIiwidHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJyZWZlcmVuY2VzIiwiJCIsIm9uIiwiX3NlbGVjdG9yIiwiYXR0YWNobWVudERyb3Bab25lIiwiZGVsZXRlIiwiX2RlbGV0ZUZpbGUiLCJlIiwic2VsZiIsImRhdGEiLCJjdXJyZW50VGFyZ2V0IiwiZGVsZXRlQnRuIiwiJGxpIiwiY2xvc2VzdCIsInN3YWwiLCJ0aXRsZSIsInNob3dDYW5jZWxCdXR0b24iLCJjYW5jZWxCdXR0b25DbGFzcyIsImNvbmZpcm1CdXR0b25DbGFzcyIsImJ1dHRvbnNTdHlsaW5nIiwidGhlbiIsInJlc3VsdCIsImFqYXgiLCJ1cmwiLCJSb3V0aW5nIiwiZ2VuZXJhdGUiLCJhdHRyIiwiZmllbGROYW1lIiwibWV0aG9kIiwic3VjY2VzcyIsIl9kZWxldGVSb3ciLCJlcnJvciIsIiRsaW5rIiwicmVtb3ZlIiwibGVuZ3RoIiwib3JpZ2luYWxOYW1lIiwiY2FuY2xlQnV0dG9uIiwiaHRtbCIsImNvbmNhdCIsImZpbmQiLCJtYWluQXR0YWNobWVudExpc3QiLCJwcmVwZW5kIiwibWFpbkxpc3QiLCJmaWxlbmFtZSIsImRvd25sb2FkIiwic2F2ZSIsIndpbmRvdyIsIkRyb3B6b25lIiwiYXV0b0Rpc2NvdmVyIiwiVXBsb2FkTXVsdGlwbGUiLCJfdGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiaW5pdGlhbERyb3Bab25lIiwicmVmcmVzaERhdGEiLCJwYXJhbU5hbWUiLCJ1cGxvYWRNdWx0aXBsZSIsImRpY3RJbnZhbGlkRmlsZVR5cGUiLCJkaWN0RmlsZVRvb0JpZyIsImRpY3RSZXNwb25zZUVycm9yIiwiYWNjZXB0ZWRGaWxlcyIsImpvaW4iLCJpbml0IiwiZmlsZSIsImNzcyIsInNldFRpbWVvdXQiLCJyZW1vdmVGaWxlIiwic2hvd011bCIsImRhdGF0eXBlIiwiY29udGVudFR5cGUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFB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RSxLQUFLbUUsV0FBV0gsSUFDbEJqRixLQUFLaUIsS0FBTWdFLEdBQU8sT0FFeEJoRSxLQUFLRyxHQUFHLGtCQUFtQixTQUFVNkQsRUFBTXRELEdBQ3ZDRCxFQUFLMkQsUUFBUTFELEtBRWpCVixLQUFLRyxHQUFHLFFBQVEsU0FBVTZELEVBQUt0RCxHQUMzQlIsRUFBRSwwQkFBMEIrRCxJQUFJLE9BQVEsUUFBUUEsSUFBSSxVQUFVLElBQzlEQyxXQUFXLFNBQVNGLEdBQ2hCaEUsS0FBS21FLFdBQVdILElBQ2xCakYsS0FBS2lCLEtBQU1nRSxHQUFPLGdEQVFoQyxJQUFJdkQsRUFBT1QsS0FDWEUsRUFBRXFCLE1BQ0VDLElBQUtDLFFBQVFDLFNBQVMscUJBQXNCakMsS0FBTWdCLEVBQUtoQixLQUFLbUMsVUFBVW5CLEVBQUtqQixRQUMzRXFDLE9BQVEsT0FDUndDLFNBQVUsT0FDVkMsWUFBYSxtQkFDYnhDLFFBQVMsU0FBVXBCLEdBQ2ZELEVBQUsyRCxRQUFRMUQsSUFHakJzQixNQUFPLHdCQU1uQmUsT0FBT0csZUFBZUEiLCJmaWxlIjoiVXBsb2FkTXVsdGlwbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNjkxKTtcbiIsImNsYXNzIFVwbG9hZEZpbGUge1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCx1dWlkLGlkLCBmdW5jRG93bmxvYWRSb3V0ZSwgZnVuY0RlbGV0ZVJvdXRlLGZ1bmMsdHlwZSkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgdGhpcy5pZD1pZDtcclxuICAgICAgICB0aGlzLnV1aWQgPSB1dWlkO1xyXG4gICAgICAgIHRoaXMuZnVuYz1mdW5jO1xyXG4gICAgICAgIHRoaXMudHlwZT10eXBlO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZnVuY0Rvd25sb2FkUm91dGUgPSBmdW5jRG93bmxvYWRSb3V0ZTtcclxuICAgICAgICB0aGlzLmZ1bmNEZWxldGVSb3V0ZSA9IGZ1bmNEZWxldGVSb3V0ZTtcclxuICAgICAgICAkKFwiI1wiK2ZpZWxkKS5vbignYmx1cicsdGhpcy5fc2VsZWN0b3IuYXR0YWNobWVudERyb3Bab25lKTtcclxuICAgICAgICAkKFwiI1wiK2ZpZWxkKS5vbignY2xpY2snLCB0aGlzLl9zZWxlY3Rvci5kZWxldGUsIHRoaXMuX2RlbGV0ZUZpbGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAvKiBjb25zb2xlLmxvZyh0aGlzLnR5cGUpO1xyXG4gICAgICAgIGlmKHRoaXMudHlwZT09XCJuZXdcIiB8fCB0aGlzLnR5cGU9PSdlZGl0Jyl7XHJcbiAgICAgICAgICAgICQoJ2J1dHRvbi5qcy1kZWxldGUnKS5wcm9wKFwiZGlzYWJsZWRcIixmYWxzZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICQoJ2J1dHRvbi5qcy1kZWxldGUnKS5wcm9wKFwiZGlzYWJsZWRcIix0cnVlKTtcclxuICAgICAgICB9Ki9cclxuICAgIH1cclxuXHJcbiAgICBnZXQgSUQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9zZWxlY3RvcigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYWluTGlzdDogXCJ1bC5qcy1hdHRhY2htZW50LWxpc3RcIixcclxuICAgICAgICAgICAgZmlsZW5hbWU6IFwibGFiZWwuanMtYXR0YWNobWVudFwiLFxyXG4gICAgICAgICAgICBkb3dubG9hZDogXCJidXR0b24janMtZG93bmxvYWRcIixcclxuICAgICAgICAgICAgZGVsZXRlOiBcImJ1dHRvbi5qcy1kZWxldGVcIixcclxuICAgICAgICAgICAgc2F2ZTogXCJidXR0b24jc2F2ZVwiLFxyXG4gICAgICAgICAgICBtYWluQXR0YWNobWVudExpc3Q6IFwidWwuanMtYXR0YWNobWVudC1saXN0XCIsXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgX2RlbGV0ZUZpbGUoZSkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgZGVsZXRlOiBlLmN1cnJlbnRUYXJnZXRcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkZWxldGVCdG4gPSAkKGRhdGEuZGVsZXRlKTtcclxuICAgICAgICBjb25zdCAkbGkgPSAkKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmxpc3QtZ3JvdXAtaXRlbScpO1xyXG4gICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICB0aXRsZTogXCLnorrlrpropoHliKrpmaToqbLnrYbos4fmlpnll47vvJ9cIixcclxuICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcclxuXHJcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbkNsYXNzOiAnYnRuIGJ0bi1kYW5nZXInLFxyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3M6ICdidG4gYnRuLXByaW1hcnkgc2F2ZScsXHJcbiAgICAgICAgICAgIGJ1dHRvbnNTdHlsaW5nOiBmYWxzZVxyXG5cclxuXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKHNlbGYuZnVuY0RlbGV0ZVJvdXRlLCB7aWQ6JGxpLmF0dHIoJ2RhdGEtaWQnKSAsIGZpZWxkTmFtZTpzZWxmLmZpZWxkfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnRGVsZXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2FsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuipsuethuizh+aWmeW3suWIqumZpFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzOiAnYnRuIGJ0bi1wcmltYXJ5IHNhdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uc1N0eWxpbmc6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlbGV0ZVJvdyhkZWxldGVCdG4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgX2RlbGV0ZVJvdygkbGluaykge1xyXG5cclxuICAgICAgICBsZXQgJHBhcmVudCA9ICRsaW5rLmNsb3Nlc3QoXCJwXCIpO1xyXG4gICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgc2hvd011bChkYXRhKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmlnaW5hbE5hbWUgPSBkYXRhW2ldWydvcmlnaW5hbE5hbWUnXTtcclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FuY2xlQnV0dG9uID0gJyc7XHJcbiAgICAgICAgICAgIGlmICh0eXBlICE9ICduZXcnICYmIHR5cGUgIT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jbGVCdXR0b24gPSAnZGlzYWJsZWQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIGxpY2huYWdlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDtib3JkZXI6IHVuc2V0XCIgZGF0YS1pZD1cIiR7ZGF0YVtpXVsnaWQnXX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgIHN0eWxlPVwid2lkdGg6IGF1dG87XCI+JHtvcmlnaW5hbE5hbWV9PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7Um91dGluZy5nZW5lcmF0ZSh0aGlzLmZ1bmNEb3dubG9hZFJvdXRlLCB7J2lkJzogZGF0YVtpXVsnaWQnXX0pfVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi1zbVwiIHN0eWxlPVwidmVydGljYWwtYWxpZ246IG1pZGRsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLWRvd25sb2FkXCI+PC9zcGFuPjwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImpzLWRlbGV0ZSBidG4gYnRuLWxpbmsgYnRuLXNtXCIgYCtjYW5jbGVCdXR0b24rYCB0eXBlPVwiYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIj48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+PC9wPlxyXG4gICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICB2YXIgaHRtbDEgPSAkKFwiI1wiK3RoaXMuZmllbGQpLmZpbmQodGhpcy5fc2VsZWN0b3IubWFpbkF0dGFjaG1lbnRMaXN0KS5wcmVwZW5kKGh0bWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbndpbmRvdy5VcGxvYWRGaWxlID0gVXBsb2FkRmlsZTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCAnLi9VcGxvYWRGaWxlJztcclxuXHJcbkRyb3B6b25lLmF1dG9EaXNjb3ZlciA9IGZhbHNlO1xyXG5cclxuY2xhc3MgVXBsb2FkTXVsdGlwbGUgZXh0ZW5kcyAgVXBsb2FkRmlsZXtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCx1dWlkLGlkLCBmdW5jRG93bmxvYWRSb3V0ZSwgZnVuY0RlbGV0ZVJvdXRlLGZ1bmMsdHlwZSkge1xyXG4gICAgICAgIHN1cGVyKGZpZWxkLHV1aWQsaWQsIGZ1bmNEb3dubG9hZFJvdXRlLCBmdW5jRGVsZXRlUm91dGUsZnVuYyx0eXBlKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsRHJvcFpvbmUoKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hEYXRhKCk7XHJcblxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgaW5pdGlhbERyb3Bab25lKCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBhdHRhY2htZW50RHJvcFpvbmUgPSBuZXcgRHJvcHpvbmUoXCIjXCIrc2VsZi5maWVsZCtcIiBkaXYuanMtYXR0YWNobWVudC1kcm9wem9uZVwiLCB7XHJcbiAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZSgndXBsb2FkX211bHRpcGxlRmlsZXMnLCB7dXVpZDogc2VsZi51dWlkLCBmaWVsZE5hbWU6IHNlbGYuZmllbGQsZnVuYzpzZWxmLmZ1bmN9KSxcclxuICAgICAgICAgICAgcGFyYW1OYW1lOiAnZmlsZScsXHJcbiAgICAgICAgICAgIHVwbG9hZE11bHRpcGxlOiB0cnVlLFxyXG4gICAgICAgICAgICBkaWN0SW52YWxpZEZpbGVUeXBlOiAn5qqU5qGI5qC85byP5LiN56ym77yBJyxcclxuICAgICAgICAgICAgZGljdEZpbGVUb29CaWc6ICfmqpTmoYjlrrnph4/otoXlh7rpmZDliLbvvIEnLFxyXG4gICAgICAgICAgICBkaWN0UmVzcG9uc2VFcnJvcjon5Zue5oeJ6Yyv6Kqk77yBJyxcclxuICAgICAgICAgICAgYWNjZXB0ZWRGaWxlczpbXHJcbiAgICAgICAgICAgICAgICAnaW1hZ2UvKicsXHJcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vcGRmJyxcclxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi9tc3dvcmQnLFxyXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcsXHJcbiAgICAgICAgICAgICAgICAnZG9jbScsXHJcbiAgICAgICAgICAgICAgICAnZG90bScsXHJcbiAgICAgICAgICAgICAgICAneGxhbScsXHJcbiAgICAgICAgICAgICAgICAneGxzYicsXHJcbiAgICAgICAgICAgICAgICAneGxzbScsXHJcbiAgICAgICAgICAgICAgICAneGx0bScsXHJcbiAgICAgICAgICAgICAgICAnb2R0JyxcclxuICAgICAgICAgICAgICAgICdvZHMnLFxyXG4gICAgICAgICAgICAgICAgJ3R4dCcsXHJcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC50ZXh0JyxcclxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnNwcmVhZHNoZWV0JyxcclxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCcsXHJcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnLFxyXG4gICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsXHJcbiAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC5mb3JtdWxhJyxcclxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi94LXppcC1jb21wcmVzc2VkJyxcclxuICAgICAgICAgICAgICAgICdhcHBsaWNhdGlvbi96aXAnLFxyXG4gICAgICAgICAgICAgICAgJ3RleHQvcGxhaW4nXHJcbiAgICAgICAgICAgIF0uam9pbihcIixcIiksXHJcblxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24gKGZpbGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmR6LXN1Y2Nlc3MtbWFyayBzdmdcIikuY3NzKFwiYmFja2dyb3VuZFwiLCBcIiMzMDk5MWJcIikuY3NzKFwib3BhY2l0eVwiLDAuNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbihmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmlsZShmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcywgZmlsZSksIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uKCdzdWNjZXNzbXVsdGlwbGUnLCBmdW5jdGlvbiAoZmlsZSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2hvd011bChkYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbignZXJyb3InLGZ1bmN0aW9uIChmaWxlLGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmR6LWVycm9yLW1hcmsgc3ZnIGcgZ1wiKS5jc3MoXCJmaWxsXCIsIFwiI2MwMFwiKS5jc3MoXCJvcGFjaXR5XCIsMC41KTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGaWxlKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzLCBmaWxlKSwgMzAwMCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZnJlc2hEYXRhKCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZShcInJlZnJlc2hfYWxsX2ZpbGVzXCIsIHt1dWlkOiBzZWxmLnV1aWQsZmllbGROYW1lOnNlbGYuZmllbGR9KSxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dNdWwoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5VcGxvYWRNdWx0aXBsZT1VcGxvYWRNdWx0aXBsZTsiXSwic291cmNlUm9vdCI6IiJ9